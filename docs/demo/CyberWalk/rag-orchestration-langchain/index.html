<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CYBERWALK</title>
    <link rel="stylesheet" href="https://salif.github.io/zola-themes-collection/demo/CyberWalk/style.css">
</head>
<body>

    <nav class="main-menu">
        <button class="walkthrough-btn" onclick="startWalkthrough(1)">Slow Walk</button>
        <button class="walkthrough-btn" onclick="startWalkthrough(2)">Fast Scan</button>
        <button class="walkthrough-btn" onclick="location.href='/'">Root /</button>
    </nav>

    <div class="container">
        
<article class="post-detail">
    <header class="post-header">
        <h1 class="post-title">Productionizing RAG: Beyond the Naive Loop</h1>
        
        <div class="system-info glow-box">
            <p>> **STATUS**: [ ARCHIVED ]</p>
            <p>> **DATE_CREATED**: [ 2023-10-25 00:00:00 ]</p>
            <p>> **AUTHOR**: [ SYSTEM ]</p>
            <p>> **CATEGORY**: [ 
                
                    <a href="https://salif.github.io/zola-themes-collection/demo/CyberWalk/categories/etc-conf/">/ETC&#x2F;CONF</a> | 
                
                    <a href="https://salif.github.io/zola-themes-collection/demo/CyberWalk/categories/bin-conf/">/BIN&#x2F;CONF</a>
                
            ]</p>
            <p>> **TAGS**: [
                
                    #llm, 
                
                    #rag, 
                
                    #langchain, 
                
                    #architecture
                
            ]</p>
        </div>
    </header>

    <section class="post-content">
        <p>Retrieval Augmented Generation (RAG) has moved past the "Hello World" phase of dumping PDFs into a vector database. The industry is now grappling with <strong>Context Window Pollution</strong> and <strong>Retrieval Latency</strong>.</p>
<h2 id="the-architecture-of-advanced-rag">The Architecture of Advanced RAG</h2>
<p>We are seeing a shift from linear chains to <strong>Agentic Graphs</strong>. Instead of <code>Retrieve -&gt; Generate</code>, we now have <code>Route -&gt; Retrieve -&gt; Grade -&gt; Generate</code>.</p>
<h3 id="1-query-routing">1. Query Routing</h3>
<p>Not every query needs a vector search. Some are summarization tasks; others are factual lookups. A router decides the path.</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>typing </span><span style="color:#b48ead;">import </span><span>Literal
</span><span style="color:#b48ead;">from </span><span>langchain_core.pydantic_v1 </span><span style="color:#b48ead;">import </span><span>BaseModel
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">RouteQuery</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">BaseModel</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Route a user query to the most relevant datasource.&quot;&quot;&quot;
</span><span>    datasource: Literal[&quot;</span><span style="color:#a3be8c;">vectorstore</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">web_search</span><span>&quot;]
</span><span>
</span><span>llm = </span><span style="color:#bf616a;">ChatOpenAI</span><span>(</span><span style="color:#bf616a;">model</span><span>=&quot;</span><span style="color:#a3be8c;">gpt-4</span><span>&quot;, </span><span style="color:#bf616a;">temperature</span><span>=</span><span style="color:#d08770;">0</span><span>)
</span><span>structured_llm_router = llm.</span><span style="color:#bf616a;">with_structured_output</span><span>(RouteQuery)
</span><span>
</span><span style="color:#65737e;"># The LLM acts as a classifier before doing any heavy lifting
</span><span>result = structured_llm_router.</span><span style="color:#bf616a;">invoke</span><span>(&quot;</span><span style="color:#a3be8c;">How do I configure a Zola theme?</span><span>&quot;)
</span><span style="color:#96b5b4;">print</span><span>(result.datasource) </span><span style="color:#65737e;"># &#39;vectorstore&#39;
</span><span style="color:#d08770;">2. </span><span>Re-</span><span style="color:#bf616a;">ranking </span><span>(The Secret Sauce)
</span><span>Vector </span><span style="color:#bf616a;">similarity </span><span>(Cosine/Euclidean) is often structurally correct but semantically vague. Introducing a Cross-Encoder re-ranker step after retrieval but before </span><span style="color:#bf616a;">LLM </span><span>context injection typically boosts accuracy by </span><span style="color:#d08770;">15</span><span>-</span><span style="color:#d08770;">20</span><span>%.
</span><span>
</span><span>Performance Note: Re-ranking is computationally expensive. Use it on the top </span><span style="color:#d08770;">10</span><span>-</span><span style="color:#d08770;">20 </span><span>retrieved chunks, not the whole dataset.
</span><span>
</span><span>The Shift to Graph-Based Flows
</span><span>Libraries like LangGraph represent state </span><span style="background-color:#bf616a;color:#2b303b;">as</span><span> a graph edge. This allows loopsâ€”essential </span><span style="color:#b48ead;">for</span><span> &quot;Agentic </span><span style="color:#bf616a;">RAG</span><span>&quot; where the model can decide the retrieved context </span><span style="background-color:#bf616a;color:#2b303b;">is</span><span> insufficient </span><span style="background-color:#bf616a;color:#2b303b;">and</span><span> re-write its own search query to </span><span style="background-color:#bf616a;color:#2b303b;">try</span><span> again.
</span><span>
</span><span>The Python </span><span style="color:#bf616a;">AI </span><span>landscape is moving away </span><span style="color:#b48ead;">from </span><span>&quot;</span><span style="color:#a3be8c;">Scripting</span><span>&quot; LLMs to &quot;</span><span style="color:#a3be8c;">Architecting</span><span>&quot; cognitive flows.</span></code></pre>

    </section>

    <footer class="post-footer">
        <hr class="glow-divider">
        <p class="return-prompt">
            <a href="/">
                > cd ../.. <br>
                > RETURN TO ROOT_SYSTEM
            </a>
        </p>
    </footer>

</article>

    </div>

    <div id="modal-overlay"></div>
    <div id="qv-modal">
        <span class="close-btn">&times;</span>
        <div id="qv-content"></div>
    </div>

    <script src="https://salif.github.io/zola-themes-collection/demo/CyberWalk/js/script.js"></script>
</body>
</html>