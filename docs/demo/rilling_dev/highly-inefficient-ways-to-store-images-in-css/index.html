<!doctype html><html prefix="og: https://ogp.me/ns#" lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>
Highly Inefficient Ways to Store Images in CSS | rilling.dev
</title><link href="https://salif.github.io/zola-themes-collection/demo/rilling_dev/main.css?h=5ded9596c0add3202bcb" rel=stylesheet><meta content=#222222 name=theme-color><meta content="F. Rilling" name=author><meta content="This article explores silly ways to embed images using CSS." name=description><meta content="Highly Inefficient Ways to Store Images in CSS" property=og:title><meta content=article property=og:type><meta content=https://salif.github.io/zola-themes-collection/demo/rilling_dev/apple-touch-icon.png property=og:image><meta content=https://salif.github.io/zola-themes-collection/demo/rilling_dev/ property=og:url><meta content="This article explores silly ways to embed images using CSS." property=og:description><meta content=en property=og:locale><meta content=rilling.dev property=og:site_name><meta content=2021-08-29 property=article:published_time><meta content=2023-09-03 property=article:modified_time><meta content="F. Rilling" property=article:author><meta content=CSS property=article:tag><link href=/favicon.ico rel=icon sizes=32x32><link href=/favicon.svg rel=icon type=image/svg+xml><link href=/apple-touch-icon.png rel=apple-touch-icon><link href=https://salif.github.io/zola-themes-collection/demo/rilling_dev/atom.xml rel=alternate type=application/atom+xml><link href=https://salif.github.io/zola-themes-collection/demo/rilling_dev/rss.xml rel=alternate type=application/rss+xml><body><a class=skip-link href=#main>Skip to main content</a><header><nav class=navbar><a class=navbar__title href=https://salif.github.io/zola-themes-collection/demo/rilling_dev/> <svg viewbox="0 0 640 512" aria-hidden=true class=icon xmlns=http://www.w3.org/2000/svg><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg> <span>rilling.dev</span> </a><ul class=navbar__nav><li><a class=navbar__nav__link href=https://salif.github.io/zola-themes-collection/demo/rilling_dev//> Blog </a><li><a class=navbar__nav__link href=https://salif.github.io/zola-themes-collection/demo/rilling_dev//about/> About </a></ul></nav></header><main class=main id=main><article class="article article--full"><header><h1 class=article__title>Highly Inefficient Ways to Store Images in CSS</h1><div class=article__meta><span> Published: <time datetime=2021-08-29>2021-08-29</time> </span><span> Last updated: <time datetime=2023-09-03>2023-09-03</time> </span></div></header><div class=article__content><p>If you regularly work with CSS, chances are that you have referenced images from CSS code. Usually, this is done with the <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/url_function rel=noopener target=_blank><code>url()</code></a> function, which takes a URL for an image file or directly embeds a base64 encoded image.<p>But what can we do if these approaches are not exotic enough for our tastes? What if rendering images like this is just too easy and does not have a big enough performance impact? Well, you are in luck. This article explores silly ways to embed images using CSS.</p><span id=continue-reading></span><p>We use the following images from Wikimedia Commons as reference images:<ol><li><a href=https://commons.wikimedia.org/wiki/File:AdditiveColor.svg rel=noopener target=_blank>AdditiveColor</a> is an image with primitive shapes and a few different colors.<li><a href=https://commons.wikimedia.org/wiki/File:PNG_transparency_demonstration_1.png rel=noopener target=_blank>PNG transparency demonstration 1</a> is an image with full and partial transparency.<li><a href=https://commons.wikimedia.org/wiki/File:Mona_Lisa,_by_Leonardo_da_Vinci,_from_C2RMF_retouched.jpg rel=noopener target=_blank>Mona Lisa, by Leonardo da Vinci, from C2RMF retouched</a> (161 × 240 pixels) is an image with a lot of different colors and complex shapes.</ol><h2 id=misusing-css-shadows>Misusing CSS Shadows</h2><p>The idea for this article came to me when I looked through some relatively old projects of mine. One of those projects used JavaScript to convert an image file to a value that is usable with the CSS <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow rel=noopener target=_blank><code>box-shadow</code></a> property in such a way that the box shadow produced looks like the original image.<p>To understand how this works, it is important to note that <code>box-shadow</code> allow us to use them to draw an arbitrary number of rectangular shapes that do not look like shadows: A shadow can take an X and Y offset, and the color of the shadow. When not specified, the blur of the shadow defaults to <code>0</code>, which means no blur. When applied to an element that is as large as a single pixel, this allows us to draw multiple “pixel”-shadows that look nothing like a shadow. This notation can be repeated any number of times, allowing for multiple shadows on a single element.<p>To encode an existing image, load it into a <a href=https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas rel=noopener target=_blank><code>canvas</code></a> element. Then we iterate over every pixel and use <a href=https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData rel=noopener target=_blank><code>CanvasRenderingContext2D.getImageData()</code></a> to get the color data (as a tuple of the red, green, blue, and alpha channel respectively) for this pixel. We can then build a single shadow for this pixel with the same position and color.<p>The resulting <code>box-shadow</code>-encoded representation of this image looks roughly like this:<pre class="language-css z-code" data-lang=css><code class=language-css data-lang=css><span class="z-source z-css"><span class="z-meta z-selector z-css"><span class="z-entity z-other z-attribute-name z-class z-css"><span class="z-punctuation z-definition z-entity z-css">.</span>selector</span> </span><span class="z-meta z-property-list z-css"><span class="z-punctuation z-section z-property-list z-css">{</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css">	<span class="z-meta z-property-name z-css"><span class="z-support z-type z-property-name z-css">width</span></span><span class="z-punctuation z-separator z-key-value z-css">:</span><span class="z-meta z-property-value z-css"> </span><span class="z-meta z-property-value z-css"><span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span></span><span class="z-punctuation z-terminator z-rule z-css">;</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css">	<span class="z-meta z-property-name z-css"><span class="z-support z-type z-property-name z-css">height</span></span><span class="z-punctuation z-separator z-key-value z-css">:</span><span class="z-meta z-property-value z-css"> </span><span class="z-meta z-property-value z-css"><span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span></span><span class="z-punctuation z-terminator z-rule z-css">;</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css">	<span class="z-meta z-property-name z-css"><span class="z-support z-type z-property-name z-css">box-shadow</span></span><span class="z-punctuation z-separator z-key-value z-css">:</span><span class="z-meta z-property-value z-css">
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">79</span> <span class="z-constant z-numeric z-integer z-decimal z-css">108</span> <span class="z-constant z-numeric z-integer z-decimal z-css">77</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">74</span> <span class="z-constant z-numeric z-integer z-decimal z-css">103</span> <span class="z-constant z-numeric z-integer z-decimal z-css">72</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">2<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">80</span> <span class="z-constant z-numeric z-integer z-decimal z-css">109</span> <span class="z-constant z-numeric z-integer z-decimal z-css">78</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">3<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">80</span> <span class="z-constant z-numeric z-integer z-decimal z-css">109</span> <span class="z-constant z-numeric z-integer z-decimal z-css">78</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">4<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">66</span> <span class="z-constant z-numeric z-integer z-decimal z-css">97</span> <span class="z-constant z-numeric z-integer z-decimal z-css">65</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">5<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">63</span> <span class="z-constant z-numeric z-integer z-decimal z-css">94</span> <span class="z-constant z-numeric z-integer z-decimal z-css">62</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-comment z-block z-css"><span class="z-punctuation z-definition z-comment z-css">/*</span> Further pixels of first row omitted <span class="z-punctuation z-definition z-comment z-css">*/</span></span>
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">0<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">87</span> <span class="z-constant z-numeric z-integer z-decimal z-css">114</span> <span class="z-constant z-numeric z-integer z-decimal z-css">83</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">82</span> <span class="z-constant z-numeric z-integer z-decimal z-css">109</span> <span class="z-constant z-numeric z-integer z-decimal z-css">78</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span>,
</span></span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"><span class="z-meta z-property-value z-css">		<span class="z-constant z-numeric z-integer z-decimal z-css">2<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-constant z-numeric z-integer z-decimal z-css">1<span class="z-keyword z-other z-unit z-css">px</span></span> <span class="z-meta z-function-call z-css"><span class="z-support z-function z-color z-css">rgb</span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-begin z-css">(</span><span class="z-constant z-numeric z-integer z-decimal z-css">87</span> <span class="z-constant z-numeric z-integer z-decimal z-css">114</span> <span class="z-constant z-numeric z-integer z-decimal z-css">83</span> / <span class="z-constant z-numeric z-integer z-decimal z-css">1</span></span><span class="z-meta z-group z-css"><span class="z-punctuation z-definition z-group z-end z-css">)</span></span></span></span><span class="z-punctuation z-terminator z-rule z-css">;</span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css">		<span class="z-comment z-block z-css"><span class="z-punctuation z-definition z-comment z-css">/*</span> All further pixels omitted <span class="z-punctuation z-definition z-comment z-css">*/</span></span>
</span></span><span class="z-source z-css"><span class="z-meta z-property-list z-css"></span><span class="z-punctuation z-section z-property-list z-css">}</span>
</span></code></pre><p>If we now use this as the value for an elements <code>box-shadow</code>, the shadow looks like the original image.<p>Demos for the reference images (Note: they may slow down your browser):<ol><li><a href=https://salif.github.io/zola-themes-collection/demo/rilling_dev/highly-inefficient-ways-to-store-images-in-css/./demo/1.html><code>box-shadow</code> version of ‘AdditiveColor’</a>.<li><a href=https://salif.github.io/zola-themes-collection/demo/rilling_dev/highly-inefficient-ways-to-store-images-in-css/./demo/2.html><code>box-shadow</code> version of ‘PNG transparency demonstration 1’</a>.<li><a href=https://salif.github.io/zola-themes-collection/demo/rilling_dev/highly-inefficient-ways-to-store-images-in-css/./demo/3.html><code>box-shadow</code> version of ‘Mona Lisa, by Leonardo da Vinci, from C2RMF retouched’</a>.</ol><p>Depending on the hardware you use to view the preceding links, you might have noticed that the pages load rather slowly and might freeze your browser during rendering. This is because the <code>box-shadow</code> encoded image is a bit larger (Image 2 grew from roughly 222 KiB to around 2.5 MiB!). I also assume most CSS parsers are not optimized to process multiple megabytes of a single property value.<h2 id=optimizations>Optimizations</h2><p>Even though we are not trying to be efficient here, I thought it would be fun to optimize this a bit more:<h3 id=smaller-tweaks>Smaller Tweaks</h3><ul><li>Omit the <code>px</code> unit if a pixel value is zero. The unit is redundant in this case, and we can just write <code>0</code>.<li>Omit the alpha channel of a color if it is fully opaque, as that is the default.<li>Omit fully transparent pixels altogether, as they do not change the visual output at all.</ul><h3 id=color-notation>Color Notation</h3><p>I ended up using hexadecimal notation (for example <code>#ff00c0</code>) instead of the RGB color function notation (for example <code>rgb(255 0 192)</code>). This saves a few characters, and even allows us to use the shorthand notation (for example <code>#f0a</code>) where applicable.<p>I originally opted for the RGB color function notation because I assumed that we need to handle images with colors more precise than the single byte per channel the hexadecimal notation supports which you can only represent in the RGB function notation (for example <code>rgb(0.25 64.075 192 / 33.333%)</code>). This however turned out to be irrelevant later as the <a href=https://developer.mozilla.org/en-US/docs/Web/API/ImageData rel=noopener target=_blank><code>ImageData</code></a> object returned from the canvas only uses integers from <code>0</code> to <code>255</code> for color channel values, which means a single byte per channel, and thus the hexadecimal notation is enough.<h3 id=further-optimizations-that-were-not-implemented>Further Optimizations That Were not Implemented</h3><p>Using a single shadow with increased shadow spread size could be used if multiple adjacent pixels in the shape of a rectangle have the same color. If we increase the spread from <code>1px</code> to <code>2px</code>, we effectively get a 2 by 2 pixel rectangle in the given color with just one shadow. Not implemented as the logic for finding applicable situations seemed rather complex.<h2 id=summary>Summary</h2><p>While this has been a rather weird experiment, I was positively surprised that even though performance is terrible, browsers can accurately re-draw an image encoded into a <code>box-shadow</code>.<p>The script for encoding the images is available on <a href=https://codepen.io/RillingDev/full/xxdrwRe rel=noopener target=_blank>CodePen</a>, or you can <a href=https://gist.github.com/RillingDev/82a6c6efad4be263ae43ea9d8e2f23a3 rel=noopener target=_blank>download it as a Gist</a>.<p>Originally, I wanted to showcase other approaches to encode images as well in this article but ended up not doing so due to most of them being either:<ul><li>Too similar to the approach described above, for example using nested pseudo-elements like <code>:before</code>/<code>:after</code> for each pixel, or using a gradient for each row with a color stop for each pixel<li>Too complex, such as converting vector-based graphics to pseudo-elements and drawing them using CSS properties.</ul></div></article></main><footer class=footer><p class=footer__content><span class=footer__copy> © 2025 F. Rilling<br> </span> <span class=footer__tech> Source code available at GitHub: <a href=https://github.com/RillingDev/rilling.dev rel=noopener target=_blank>Contents</a>, <a href=https://github.com/RillingDev/rilling.dev_theme rel=noopener target=_blank>Theme</a>. <br> This site uses open source components. A full list can be found in the repositories linked above. </span></footer>